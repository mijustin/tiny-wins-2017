jQuery(function(o){function a(){o("#logichop-modal-backdrop").hide(),o("#logichop-modal-wrap").hide(),o(".logichop-modal-form input").val(""),o(".logichop-modal-form select").each(function(){o(this)[0].selectedIndex=0})}function t(){o("#_logichop_page_goal_js_event").val()&&o("#_logichop_page_goal_js_element").val()&&o("#_logichop_page_goal_js").val()?o(this).parent().removeClass("half-set").addClass("set"):o("#_logichop_page_goal_js_event").val()||o("#_logichop_page_goal_js_element").val()||o("#_logichop_page_goal_js").val()?o(this).parent().removeClass("set").addClass("half-set"):o(this).parent().removeClass("half-set set")}function i(){o("#_logichop_page_condition").val()&&o("#_logichop_page_redirect").val()?o(this).parent().removeClass("half-set").addClass("set"):o("#_logichop_page_condition").val()||o("#_logichop_page_redirect").val()?o(this).parent().removeClass("set").addClass("half-set"):o(this).parent().removeClass("half-set set")}var e="";o("#content").on("mouseout mouseup keyup",function(){window.getSelection()&&(e=window.getSelection().toString())}),o("body").on("click",".logichop-editor",function(){if(o("#wp-content-wrap").hasClass("tmce-active"))try{e=tinyMCE.activeEditor.selection.getContent({format:"text"})}catch(a){}o("#logichop-modal-backdrop").fadeIn(),o("#logichop-modal-wrap").fadeIn()}),o("#logichop-modal-backdrop, .logichop-modal-close, .logichop-modal-cancel").on("click",a),o(".logichop-modal-content .nav-tab").on("click",function(a){o(".logichop-modal-content .nav-tab").removeClass("nav-tab-active"),o(this).addClass("nav-tab-active"),o(".nav-tab-display").removeClass("nav-tab-display-active"),o("."+o(this).attr("data-tab")).addClass("nav-tab-display-active"),a.preventDefault()}),o("#logichop_insert_condition").on("click",function(t){var i=o("#logichop_condition").val(),n=o("#logichop_condition option:selected").attr("data-slug");i&&n&&(window.send_to_editor('[logichop_condition id="'+i+'" condition="'+n+'"]'+e+"[/logichop_condition]"),a()),t.preventDefault()}),o("#logichop_insert_condition_not").on("click",function(t){var i=o("#logichop_condition_not").val(),n=o("#logichop_condition_not option:selected").attr("data-slug");i&&n&&(window.send_to_editor('[logichop_condition_not id="'+i+'" condition="'+n+'"]'+e+"[/logichop_condition_not]"),a()),t.preventDefault()}),o("#logichop_insert_goal").on("click",function(t){var i=o("#logichop_goal").val(),e=o("#logichop_goal option:selected").attr("data-slug");i&&e&&(window.send_to_editor("[logichop_goal goal="+i+' goal-name="'+e+'"]'),a()),t.preventDefault()}),o("#logichop_insert_conditional_goal").on("click",function(t){var i=o("#logichop_conditional").val(),e=o("#logichop_conditional option:selected").attr("data-slug"),n=o("#logichop_conditional_goal").val(),l=o("#logichop_conditional_goal option:selected").attr("data-slug");i&&e&&n&&l&&(window.send_to_editor('[logichop_conditional_goal id="'+i+'" condition="'+e+'" goal='+n+' goal-name="'+l+'"]'),a()),t.preventDefault()}),o(".logichop_insert_data_shortcode").on("click",function(t){var i=o(o(this).attr("data-input")).val();i&&(window.send_to_editor("[logichop_data var='"+i+"']"),a()),t.preventDefault()}),o(".logichop_insert_data_javascript").on("click",function(t){var i=o(o(this).attr("data-input")).val(),e=o(o(this).attr("data-input")+"_type").val()?' data-type="'+o(o(this).attr("data-input")+"_type").val()+'"':"",n=o(o(this).attr("data-input")+"_event").val()?' data-event="'+o(o(this).attr("data-input")+"_event").val()+'"':"";i&&(window.send_to_editor('<span class="logichop-js" data-var="'+i+'"'+e+n+"></span>"),a()),t.preventDefault()}),o("#logichop_insert_js_condition").on("click",function(t){var i=o("#logichop_condition_js").val(),n=o("#logichop_condition_display").val()?' style="'+o("#logichop_condition_display").val()+'"':"",l=o("#logichop_condition_event").val()?' data-event="'+o("#logichop_condition_event").val()+'"':"",c=o("#logichop_condition_not_js").val()?' data-not="'+o("#logichop_condition_not_js").val()+'"':"",_=o("#logichop_condition_css_add").val()?' data-css-add="'+o("#logichop_condition_css_add").val()+'"':"",s=o("#logichop_condition_css_remove").val()?' data-css-remove="'+o("#logichop_condition_css_remove").val()+'"':"";i&&("callback"!=o("#logichop_condition_event").val()?window.send_to_editor('<div class="logichop-js" data-cid="'+i+'"'+n+l+c+_+s+">"+e+"</div>"):window.send_to_editor('<script class="logichop-js" data-cid="'+i+'"'+l+c+' data-callback=""></script>'),a()),t.preventDefault()}),o(".logichop-meta-clear").on("click",function(a){var t=o(this).closest(".logichop-meta");t.removeClass("half-set set").children("select, input").val(""),t.children('input[type="number"]').val("0"),a.preventDefault()}),o("#_logichop_page_leadscore").on("change",function(){0!=o(this).val()?o(this).parent().addClass("set"):o(this).parent().removeClass("set")}),o("#_logichop_page_goal").on("change",function(){o(this).val()?o(this).parent().addClass("set"):o(this).parent().removeClass("set")}),o("#_logichop_track_page").on("change",function(){"enabled"==o(this).val()?o(this).parent().addClass("set"):o(this).parent().removeClass("set")}),o("#_logichop_page_goal_condition, #_logichop_page_goal_on_condition").on("change",function(){o("#_logichop_page_goal_condition").val()&&o("#_logichop_page_goal_on_condition").val()?o(this).parent().removeClass("half-set").addClass("set"):o("#_logichop_page_goal_condition").val()||o("#_logichop_page_goal_on_condition").val()?o(this).parent().removeClass("set").addClass("half-set"):o(this).parent().removeClass("half-set set")}),o("#_logichop_page_goal_js_event, #_logichop_page_goal_js_element, #_logichop_page_goal_js").on("change",t),o("#_logichop_page_goal_js_element").on("keyup",t),o("#_logichop_page_condition, #_logichop_page_redirect").on("change",i),o("#_logichop_page_redirect").on("keyup",i)});